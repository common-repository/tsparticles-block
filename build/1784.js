"use strict";(globalThis.webpackChunkwordpress_particles=globalThis.webpackChunkwordpress_particles||[]).push([[1784],{1784:(t,i,e)=>{e.r(i),e.d(i,{loadEmittersPlugin:()=>g});var s=e(4684),n=e(5302);class a{randomPosition(t,i,e){const[s,a]=[i.width/2,i.height/2],o=((t,i)=>{const e=(0,n.sZ)()/4,s=Math.atan(i/t*Math.tan(2*Math.PI*e)),a=(0,n.sZ)();return a<.25?s:a<.5?Math.PI-s:a<.75?Math.PI+s:-s})(s,a),r=(c=o,(l=s)*(d=a)/Math.sqrt((d*Math.cos(c))**2+(l*Math.sin(c))**2)),h=e?r*Math.sqrt((0,n.sZ)()):r;var l,d,c;return{x:t.x+h*Math.cos(o),y:t.y+h*Math.sin(o)}}}var o=e(7327);class r{constructor(){this.wait=!1}load(t){t&&(void 0!==t.count&&(this.count=t.count),void 0!==t.delay&&(this.delay=t.delay),void 0!==t.duration&&(this.duration=t.duration),void 0!==t.wait&&(this.wait=t.wait))}}class h{constructor(){this.quantity=1,this.delay=.1}load(t){void 0!==t&&(void 0!==t.quantity&&(this.quantity=(0,n.Cs)(t.quantity)),void 0!==t.delay&&(this.delay=(0,n.Cs)(t.delay)))}}class l{constructor(){this.mode="percent",this.height=0,this.width=0}load(t){void 0!==t&&(void 0!==t.mode&&(this.mode=t.mode),void 0!==t.height&&(this.height=t.height),void 0!==t.width&&(this.width=t.width))}}class d{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new r,this.rate=new h,this.shape="square",this.startCount=0}load(t){t&&(void 0!==t.autoPlay&&(this.autoPlay=t.autoPlay),void 0!==t.size&&(this.size||(this.size=new l),this.size.load(t.size)),void 0!==t.direction&&(this.direction=t.direction),this.domId=t.domId,void 0!==t.fill&&(this.fill=t.fill),this.life.load(t.life),this.name=t.name,this.particles=(0,s.KH)(t.particles,(t=>(0,s.ZB)({},t))),this.rate.load(t.rate),void 0!==t.shape&&(this.shape=t.shape),void 0!==t.position&&(this.position={},void 0!==t.position.x&&(this.position.x=(0,n.Cs)(t.position.x)),void 0!==t.position.y&&(this.position.y=(0,n.Cs)(t.position.y))),void 0!==t.spawnColor&&(void 0===this.spawnColor&&(this.spawnColor=new o.R),this.spawnColor.load(t.spawnColor)),void 0!==t.startCount&&(this.startCount=t.startCount))}}var c=e(6720),u=e(2613);class p{constructor(t,i,e,a,o){this.emitters=i,this.container=e,this._calcPosition=()=>(0,n.Gz)({size:this.container.canvas.size,position:this.options.position}),this._destroy=()=>{this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._emit=()=>{if(this._paused)return;const t=(0,n.Gu)(this.options.rate.quantity);this._emitParticles(t)},this._emitParticles=t=>{const i=this.getPosition(),e=this.getSize(),n=(0,s.wA)(this._particlesOptions);for(let a=0;a<t;a++){const t=(0,s.ZB)({},n);if(this.spawnColor){const i=this.options.spawnColor?.animation;i&&(this.spawnColor.h=this._setColorAnimation(i.h,this.spawnColor.h,360),this.spawnColor.s=this._setColorAnimation(i.s,this.spawnColor.s,100),this.spawnColor.l=this._setColorAnimation(i.l,this.spawnColor.l,100)),t.color?t.color.value=this.spawnColor:t.color={value:this.spawnColor}}if(!i)return;const a=this._shape?.randomPosition(i,e,this.fill)??i;this.container.particles.addParticle(a,t)}},this._prepareToDie=()=>{if(this._paused)return;const t=this.options.life?.duration;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&void 0!==t&&t>0&&(this._duration=1e3*t)},this._setColorAnimation=(t,i,e)=>{const s=this.container;if(!t.enable)return i;const a=(0,n.vd)(t.offset),o=1e3*(0,n.Gu)(this.options.rate.delay)/s.retina.reduceFactor;return(i+(0,n.Gu)(t.speed??0)*s.fpsLimit/o+3.6*a)%e},this._engine=t,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=o,a instanceof d?this.options=a:(this.options=new d,this.options.load(a)),this._spawnDelay=1e3*(this.options.life.delay??0)/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this._shape=this._engine.emitterShapeManager?.getShape(this.options.shape),this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let r=(0,s.ZB)({},this.options.particles);r??={},r.move??={},r.move.direction??=this.options.direction,this.options.spawnColor&&(this.spawnColor=(0,c.lN)(this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=r,this.size=this.options.size??(()=>{const t=new l;return t.load({height:0,mode:"percent",width:0}),t})(),this._lifeCount=this.options.life.count??-1,this._immortal=this._lifeCount<=0,this._engine.dispatchEvent("emitterCreated",{container:e,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}getPosition(){if(this.options.domId){const t=this.container,i=document.getElementById(this.options.domId);if(i){const e=i.getBoundingClientRect();return{x:(e.x+e.width/2)*t.retina.pixelRatio,y:(e.y+e.height/2)*t.retina.pixelRatio}}}return this.position}getSize(){const t=this.container;if(this.options.domId){const i=document.getElementById(this.options.domId);if(i){const e=i.getBoundingClientRect();return{width:e.width*t.retina.pixelRatio,height:e.height*t.retina.pixelRatio}}}return(0,s.ap)(this.size,t.canvas.size)}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??0))){if(void 0===this._emitDelay){const t=(0,n.Gu)(this.options.rate.delay);this._emitDelay=1e3*t/this.container.retina.reduceFactor}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}}resize(){const t=this._initialPosition;this.position=t&&(0,s.Ac)(t,this.container.canvas.size,u.O.origin)?t:this._calcPosition()}update(t){this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??0,this._currentEmitDelay=this._emitDelay??0),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),void 0!==this._duration&&(this._currentDuration+=t.value,this._currentDuration>=this._duration&&(this.pause(),void 0!==this._spawnDelay&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal?(this.position=this._calcPosition(),this._spawnDelay=1e3*(this.options.life.delay??0)/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),void 0!==this._spawnDelay&&(this._currentSpawnDelay+=t.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),void 0!==this._emitDelay&&(this._currentEmitDelay+=t.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}}class m{constructor(t,i){this.container=i,this._engine=t,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]},i.getEmitter=t=>void 0===t||(0,s.hj)(t)?this.array[t||0]:this.array.find((i=>i.name===t)),i.addEmitter=(t,i)=>this.addEmitter(t,i),i.removeEmitter=t=>{const e=i.getEmitter(t);e&&this.removeEmitter(e)},i.playEmitter=t=>{const e=i.getEmitter(t);e&&e.externalPlay()},i.pauseEmitter=t=>{const e=i.getEmitter(t);e&&e.externalPause()}}addEmitter(t,i){const e=new d;e.load(t);const s=new p(this._engine,this,this.container,e,i);return this.array.push(s),s}handleClickMode(t){const i=this.emitters,e=this.interactivityEmitters;if("emitter"!==t)return;let n;if(e&&(0,s.kJ)(e.value))if(e.value.length>0&&e.random.enable){n=[];const t=[];for(let i=0;i<e.random.count;i++){const a=(0,s.dU)(e.value);t.includes(a)&&t.length<e.value.length?i--:(t.push(a),n.push((0,s.c8)(e.value,a)))}}else n=e.value;else n=e?.value;const a=n??i,o=this.container.interactivity.mouse.clickPosition;(0,s.KH)(a,(t=>{this.addEmitter(t,o)}))}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,this.emitters)if((0,s.kJ)(this.emitters))for(const t of this.emitters)this.addEmitter(t);else this.addEmitter(this.emitters)}pause(){for(const t of this.array)t.pause()}play(){for(const t of this.array)t.play()}removeEmitter(t){const i=this.array.indexOf(t);i>=0&&this.array.splice(i,1)}resize(){for(const t of this.array)t.resize()}stop(){this.array=[]}update(t){for(const i of this.array)i.update(t)}}const y=new Map;class _{constructor(t){this._engine=t}addShape(t,i){this.getShape(t)||y.set(t,i)}getShape(t){return y.get(t)}getSupportedShapes(){return y.keys()}}function v(t,i){return t+i*((0,n.sZ)()-.5)}class w{randomPosition(t,i,e){if(e)return{x:v(t.x,i.width),y:v(t.y,i.height)};{const e=i.width/2,s=i.height/2,a=Math.floor(4*(0,n.sZ)()),o=2*((0,n.sZ)()-.5);switch(a){case 0:return{x:t.x+o*e,y:t.y-s};case 1:return{x:t.x-e,y:t.y+o*s};case 2:return{x:t.x+o*e,y:t.y+s};default:return{x:t.x+e,y:t.y+o*s}}}}}class f{constructor(t){this._engine=t,this.id="emitters"}getPlugin(t){return new m(this._engine,t)}loadOptions(t,i){if(!this.needsPlugin(t)&&!this.needsPlugin(i))return;i?.emitters&&(t.emitters=(0,s.KH)(i.emitters,(t=>{const i=new d;return i.load(t),i})));const e=i?.interactivity?.modes?.emitters;if(e)if((0,s.kJ)(e))t.interactivity.modes.emitters={random:{count:1,enable:!0},value:e.map((t=>{const i=new d;return i.load(t),i}))};else{const i=e;if(void 0!==i.value)if((0,s.kJ)(i.value))t.interactivity.modes.emitters={random:{count:i.random.count??1,enable:i.random.enable??!1},value:i.value.map((t=>{const i=new d;return i.load(t),i}))};else{const e=new d;e.load(i.value),t.interactivity.modes.emitters={random:{count:i.random.count??1,enable:i.random.enable??!1},value:e}}else(t.interactivity.modes.emitters={random:{count:1,enable:!1},value:new d}).value.load(e)}}needsPlugin(t){if(!t)return!1;const i=t.emitters;return(0,s.kJ)(i)&&!!i.length||void 0!==i||!!t.interactivity?.events?.onClick?.mode&&(0,s.dB)("emitter",t.interactivity.events.onClick.mode)}}async function g(t,i=!0){t.emitterShapeManager||(t.emitterShapeManager=new _(t)),t.addEmitterShape||(t.addEmitterShape=(i,e)=>{t.emitterShapeManager?.addShape(i,e)});const e=new f(t);await t.addPlugin(e,i),t.addEmitterShape("circle",new a),t.addEmitterShape("square",new w)}}}]);